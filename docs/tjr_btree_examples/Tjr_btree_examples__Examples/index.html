<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tjr_btree_examples__Examples (tjr_btree_examples.Tjr_btree_examples__Examples)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tjr_btree_examples</a> &#x00BB; Tjr_btree_examples__Examples</nav><h1>Module <code>Tjr_btree_examples__Examples</code></h1><p>The steps to construct an example are:</p><ul><li>fix the monad type (eg store passing)</li><li>construct block ops <span class="xref-unresolved" title="unresolved reference to &quot;Tjr_fs_shared.Block_ops&quot;"><code>Tjr_fs_shared</code>.Block_ops</span>, which converts strings/bytes to/from blks</li><li>construct block device ops <span class="xref-unresolved" title="unresolved reference to &quot;Tjr_fs_shared.Blk_dev_ops_type&quot;"><code>Tjr_fs_shared</code>.Blk_dev_ops_type</span>, which reads and writes to blks</li><li>implement <span class="xref-unresolved" title="unresolved reference to &quot;Bin_prot_marshalling.node_leaf_conversions&quot;"><code>Bin_prot_marshalling</code>.node_leaf_conversions</span> to convert from list-based leaf/node impls to the efficient leaf/node impls</li><li>implement marshalling procedures via <code>Bin_prot_marshalling</code></li><li>calculate constants based on blk_sz and key and value types, and marshalling strategy</li><li>implement blk_allocator_ops, to allow allocation of blks via id</li><li>for every desired combination of (key/value types, marshalling, blk_dev, blk_allocator), use <a href="../../tjr_btree/Tjr_btree/index.html#val-uncached_disk_to_store"><code>Tjr_btree.uncached_disk_to_store</code></a> to construct a corresponding store</li><li>then use <a href="../../tjr_btree/Tjr_btree/index.html#val-store_ops_to_map_ops"><code>Tjr_btree.store_ops_to_map_ops</code></a> to convert store to a map (using a root pointer to convert the pre_map_ops to a map_ops)</li></ul><p>FIXME include this documentation in main tjr_btree lib, perhaps as a simple int-&gt;int example</p><nav class="toc"><ul><li><a href="#in-memory-examples">In-memory examples</a></li><li><a href="#on-disk-examples">On disk examples</a></li></ul></nav></header><section><header><h3 id="in-memory-examples"><a href="#in-memory-examples" class="anchor"></a>In-memory examples</h3></header><div class="spec module" id="module-Internal_in_mem"><a href="#module-Internal_in_mem" class="anchor"></a><code><span class="keyword">module</span> <a href="Internal_in_mem/index.html">Internal_in_mem</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-ii_mem_map"><a href="#val-ii_mem_map" class="anchor"></a><code><span class="keyword">val</span> ii_mem_map : root_ops:(<a href="../Tjr_btree_examples/Bin_prot_marshalling/Internal/index.html#type-page_ref">Tjr_btree_examples.Bin_prot_marshalling.Internal.page_ref</a>, Tjr_store.t Tjr_monad.State_passing.state_passing) Tjr_monad.Mref.mref <span>&#45;&gt;</span> [&gt; `Map_ops of (int, int, Tjr_store.t Tjr_monad.State_passing.state_passing) <a href="../../tjr_btree/Tjr_btree__/Map_ops_type/index.html#type-map_ops">Tjr_btree__.Map_ops_type.map_ops</a> ] * [&gt; `Insert_many of unit ]</code></dt><dt class="spec value" id="val-ss_mem_map"><a href="#val-ss_mem_map" class="anchor"></a><code><span class="keyword">val</span> ss_mem_map : root_ops:(<a href="../Tjr_btree_examples/Bin_prot_marshalling/Internal/index.html#type-page_ref">Tjr_btree_examples.Bin_prot_marshalling.Internal.page_ref</a>, Tjr_store.t Tjr_monad.State_passing.state_passing) Tjr_monad.Mref.mref <span>&#45;&gt;</span> [&gt; `Map_ops of (Tjr_fs_shared.Small_string.ss, Tjr_fs_shared.Small_string.ss, Tjr_store.t Tjr_monad.State_passing.state_passing) <a href="../../tjr_btree/Tjr_btree__/Map_ops_type/index.html#type-map_ops">Tjr_btree__.Map_ops_type.map_ops</a> ] * [&gt; `Insert_many of unit ]</code></dt></dl></section><section><header><h3 id="on-disk-examples"><a href="#on-disk-examples" class="anchor"></a>On disk examples</h3></header></section></div></body></html>